<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö® DEBUG FOOTER URGENTE</title>
    <style>
        body { 
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            margin: 0;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }
        main {
            flex: 1;
            padding: 20px;
        }
        .debug {
            background: #000;
            color: #0f0;
            padding: 15px;
            font-family: monospace;
            margin: 10px 0;
            border-radius: 5px;
            white-space: pre-wrap;
        }
        .error { color: #ff0000; }
        .success { color: #00ff00; }
        .warning { color: #ffff00; }
    </style>
</head>
<body>
    <main>
        <h1>üö® DEBUG FOOTER URGENTE</h1>
        
        <div>
            <button onclick="forceDebug()">üîç DEBUG COMPLETO</button>
            <button onclick="forceLoad()">üöÄ FOR√áAR CARREGAMENTO</button>
            <button onclick="checkClasses()">üîß VERIFICAR CLASSES</button>
        </div>
        
        <div id="debug-output" class="debug">
üö® INICIANDO DEBUG EMERGENCIAL...
        </div>
    </main>

    <script src="js/footer.js"></script>
    
    <script>
        function log(message, type = 'info') {
            const output = document.getElementById('debug-output');
            const timestamp = new Date().toLocaleTimeString();
            const colorClass = type === 'error' ? 'error' : type === 'success' ? 'success' : type === 'warning' ? 'warning' : '';
            
            output.innerHTML += `\n[${timestamp}] <span class="${colorClass}">${message}</span>`;
            output.scrollTop = output.scrollHeight;
        }
        
        function forceDebug() {
            log('üîç INICIANDO DEBUG COMPLETO...', 'warning');
            
            // 1. Verificar se classe existe
            log(`1. Classe EditalizaFooterRefatorado: ${typeof window.EditalizaFooterRefatorado}`, 
                typeof window.EditalizaFooterRefatorado !== 'undefined' ? 'success' : 'error');
            
            // 2. Verificar se manager existe
            log(`2. footerManagerRefatorado: ${typeof window.footerManagerRefatorado}`, 
                typeof window.footerManagerRefatorado !== 'undefined' ? 'success' : 'error');
            
            // 3. Verificar current page
            log(`3. Current page: ${window.location.pathname}`, 'info');
            
            // 4. Testar shouldShowFooter
            if (window.footerManagerRefatorado) {
                const shouldShow = window.footerManagerRefatorado.shouldShowFooter();
                log(`4. shouldShowFooter(): ${shouldShow}`, shouldShow ? 'success' : 'error');
            } else {
                log('4. N√£o posso testar shouldShowFooter - manager n√£o existe', 'error');
            }
            
            // 5. Verificar DOM
            const existingFooter = document.querySelector('.editaliza-footer-refatorado');
            log(`5. Footer no DOM: ${!!existingFooter}`, existingFooter ? 'success' : 'error');
            if (existingFooter) {
                log(`   - Dimens√µes: ${existingFooter.offsetWidth}x${existingFooter.offsetHeight}`, 'info');
                log(`   - Display: ${window.getComputedStyle(existingFooter).display}`, 'info');
                log(`   - Visibility: ${window.getComputedStyle(existingFooter).visibility}`, 'info');
            }
            
            // 6. Verificar CSS
            const cssExists = document.querySelector('#editaliza-footer-refatorado-css');
            log(`6. CSS injetado: ${!!cssExists}`, cssExists ? 'success' : 'error');
            
            // 7. Console errors
            log('7. Verificando console...', 'warning');
        }
        
        function forceLoad() {
            log('üöÄ FOR√áANDO CARREGAMENTO MANUAL...', 'warning');
            
            try {
                // Remover footer existente
                const existing = document.querySelector('.editaliza-footer-refatorado');
                if (existing) {
                    existing.remove();
                    log('üóëÔ∏è Footer existente removido', 'warning');
                }
                
                // Criar nova inst√¢ncia
                const footer = new window.EditalizaFooterRefatorado();
                log('‚úÖ Nova inst√¢ncia criada', 'success');
                
                // For√ßar init
                footer.init().then(() => {
                    log('‚úÖ Init conclu√≠do!', 'success');
                    
                    setTimeout(() => {
                        const newFooter = document.querySelector('.editaliza-footer-refatorado');
                        if (newFooter) {
                            log(`üéâ FOOTER APARECEU! Altura: ${newFooter.offsetHeight}px`, 'success');
                        } else {
                            log('‚ùå Footer ainda n√£o apareceu ap√≥s init', 'error');
                        }
                    }, 1000);
                    
                }).catch(error => {
                    log(`‚ùå Erro no init: ${error.message}`, 'error');
                });
                
            } catch (error) {
                log(`‚ùå Erro ao for√ßar: ${error.message}`, 'error');
            }
        }
        
        function checkClasses() {
            log('üîß VERIFICANDO CLASSES CSS...', 'warning');
            
            // Verificar se CSS foi aplicado
            const testDiv = document.createElement('div');
            testDiv.className = 'editaliza-footer-refatorado';
            testDiv.style.display = 'none';
            document.body.appendChild(testDiv);
            
            const styles = window.getComputedStyle(testDiv);
            log(`Font-family: ${styles.fontFamily}`, 'info');
            log(`Width: ${styles.width}`, 'info');
            log(`Margin-left: ${styles.marginLeft}`, 'info');
            
            document.body.removeChild(testDiv);
        }
        
        // Auto debug
        setTimeout(() => {
            log('‚è∞ AUTO DEBUG AP√ìS 2 SEGUNDOS...', 'warning');
            forceDebug();
        }, 2000);
        
        // Interceptar console
        const originalConsoleLog = console.log;
        const originalConsoleError = console.error;
        
        console.log = function(...args) {
            const message = args.join(' ');
            if (message.includes('FooterRefatorado') || message.includes('footer') || message.includes('Footer')) {
                log(`CONSOLE: ${message}`, 'info');
            }
            originalConsoleLog.apply(console, args);
        };
        
        console.error = function(...args) {
            const message = args.join(' ');
            log(`CONSOLE ERROR: ${message}`, 'error');
            originalConsoleError.apply(console, args);
        };
    </script>
</body>
</html>
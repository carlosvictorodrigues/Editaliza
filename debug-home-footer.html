<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Footer Home - Editaliza</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/footer.css" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .debug-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .status {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.warning { background: #fff3cd; color: #856404; }
        .log-output {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 11px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="debug-section">
        <h1>üîç Debug Footer na Home</h1>
        <p>Esta p√°gina simula exatamente a estrutura da home.html para debugar o footer</p>
    </div>
    
    <div class="debug-section">
        <h2>üìã Status dos Componentes:</h2>
        <p>CSS carregado: <span id="css-status" class="status">Verificando...</span></p>
        <p>Script carregado: <span id="script-status" class="status">Verificando...</span></p>
        <p>Footer renderizado: <span id="footer-status" class="status">Verificando...</span></p>
        <p>Footer vis√≠vel: <span id="footer-visible" class="status">Verificando...</span></p>
    </div>
    
    <div class="debug-section">
        <h2>üß™ Simula√ß√£o da Home:</h2>
        <p>Conte√∫do simulado da home para testar o footer...</p>
        <div style="height: 800px; background: #f0f0f0; border: 2px dashed #ccc; display: flex; align-items: center; justify-content: center;">
            <h3>Conte√∫do Simulado da Home</h3>
        </div>
    </div>
    
    <div class="debug-section">
        <h2>üìù Logs em Tempo Real:</h2>
        <div id="log-output" class="log-output">Iniciando logs...</div>
    </div>
    
    <!-- Scripts da home -->
    <script src="js/app.js"></script>
    <script src="js/components.js"></script>
    <script src="js/checklist.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/modules/gamification.js"></script>
    
    <!-- Script do rodap√© modular -->
    <script src="js/footer.js"></script>
    
    <script>
        let logOutput = '';
        
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}\n`;
            logOutput += logEntry;
            document.getElementById('log-output').textContent = logOutput;
            
            const logElement = document.getElementById('log-output');
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        // Debug do footer
        document.addEventListener('DOMContentLoaded', function() {
            addLog('üöÄ DOM carregado - iniciando debug do footer na home');
            
            // Verificar CSS
            const cssStatus = document.getElementById('css-status');
            const footerCSS = document.querySelector('link[href="css/footer.css"]');
            if (footerCSS) {
                cssStatus.textContent = '‚úÖ CSS carregado';
                cssStatus.className = 'status success';
                addLog('‚úÖ CSS do footer encontrado');
            } else {
                cssStatus.textContent = '‚ùå CSS n√£o encontrado';
                cssStatus.className = 'status error';
                addLog('‚ùå CSS do footer n√£o encontrado');
            }
            
            // Verificar Script
            const scriptStatus = document.getElementById('script-status');
            if (typeof EditalizaFooterRefatorado !== 'undefined') {
                scriptStatus.textContent = '‚úÖ Script carregado';
                scriptStatus.style.color = 'green';
                addLog('‚úÖ Script do footer carregado');
            } else {
                scriptStatus.textContent = '‚ùå Script n√£o encontrado';
                scriptStatus.style.color = 'red';
                addLog('‚ùå Script do footer n√£o encontrado');
            }
            
            // Verificar Footer
            setTimeout(() => {
                const footer = document.querySelector('.editaliza-footer-refatorado');
                const footerStatus = document.getElementById('footer-status');
                const footerVisible = document.getElementById('footer-visible');
                
                if (footer) {
                    footerStatus.textContent = '‚úÖ Footer renderizado';
                    footerStatus.style.color = 'green';
                    addLog('üéâ Footer encontrado:', footer);
                    addLog(`üìç Posi√ß√£o: ${JSON.stringify(footer.getBoundingClientRect())}`);
                    addLog(`üìè Dimens√µes: ${footer.offsetWidth} x ${footer.offsetHeight}`);
                    
                    // Verificar se est√° vis√≠vel
                    const isVisible = footer.offsetHeight > 0 && footer.offsetWidth > 0;
                    if (isVisible) {
                        footerVisible.textContent = '‚úÖ Footer vis√≠vel';
                        footerVisible.style.color = 'green';
                        addLog('‚úÖ Footer est√° vis√≠vel na tela');
                    } else {
                        footerVisible.textContent = '‚ùå Footer n√£o vis√≠vel';
                        footerVisible.style.color = 'red';
                        addLog('‚ùå Footer n√£o est√° vis√≠vel (dimens√µes zero)');
                    }
                } else {
                    footerStatus.textContent = '‚ùå Footer n√£o renderizado';
                    footerStatus.style.color = 'red';
                    footerVisible.textContent = '‚ùå N/A';
                    footerVisible.style.color = 'red';
                    addLog('‚ùå Footer n√£o encontrado');
                }
            }, 2000);
            
            // Verificar se h√° erros
            window.addEventListener('error', function(e) {
                addLog(`‚ùå Erro capturado: ${e.error}`, 'error');
            });
            
            // Verificar se o footer est√° sendo detectado como j√° existente
            setTimeout(() => {
                addLog('üîç Verificando se footer foi detectado como existente...');
                
                if (window.footerManagerRefatorado) {
                    addLog('‚úÖ FooterManager encontrado');
                    addLog(`üìç Status: ${window.footerManagerRefatorado.isLoaded}`);
                    addLog(`üìç Debug mode: ${window.footerManagerRefatorado.debugMode}`);
                    
                    // For√ßar verifica√ß√£o manual
                    if (window.footerManagerRefatorado.checkExistingFooter) {
                        const exists = window.footerManagerRefatorado.checkExistingFooter();
                        addLog(`üìç Footer existente detectado: ${exists}`);
                    }
                } else {
                    addLog('‚ùå FooterManager n√£o encontrado');
                }
            }, 3000);
        });
        
        // Monitorar eventos do footer
        document.addEventListener('footerRefatoradoLoaded', function(event) {
            addLog('üéâ Footer carregado com sucesso!', 'success');
            addLog(`üìç Detalhes: ${JSON.stringify(event.detail)}`);
        });
        
        // Logs iniciais
        addLog('üîç Debug footer na home iniciado');
        addLog(`üìÅ Arquivo atual: ${window.location.pathname}`);
        addLog(`üîß EditalizaFooterRefatorado dispon√≠vel: ${typeof EditalizaFooterRefatorado}`);
        
        // Interceptar logs do console
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            if (args[0] && typeof args[0] === 'string' && args[0].includes('FooterRefatorado')) {
                addLog(`Console: ${args.join(' ')}`, 'console');
            }
            originalLog.apply(console, args);
        };
        
        console.error = function(...args) {
            if (args[0] && typeof args[0] === 'string' && args[0].includes('FooterRefatorado')) {
                addLog(`Console Error: ${args.join(' ')}`, 'console-error');
            }
            originalError.apply(console, args);
        };
    </script>
</body>
</html>

/* ===============================================
 * DESIGN TOKENS - Sistema de Design Editaliza
 * =============================================== */

:root {
  /* Base Colors (Light Mode) */
  --bg: #F7FAFC;
  --surface-1: #FFFFFF;
  --surface-2: #F2F4F7;
  --surface-3: #EDEFF3;
  --border: #E5E7EB;

  /* Text Colors (Light Mode) */
  --text: #111827;            /* Primary text */
  --text-muted: #4B5563;       /* Secondary text */
  --text-disabled: #9CA3AF;    /* Disabled text */

  /* Primary Colors (Light Mode) */
  --primary: #2563EB;          /* Main brand blue */
  --primary-600: #1D4ED8;      /* Active/pressed state */
  --primary-400: #60A5FA;      /* Hover state */
  --on-primary: #FFFFFF;       /* Text on primary bg */

  /* Secondary Colors (Light Mode) */
  --secondary: #374151;        /* Neutral button/control */
  --secondary-hover: #4B5563;
  --on-secondary: #E5E7EB;

  /* Status Colors (Light Mode) */
  --success: #16A34A;
  --on-success: #052E16;
  --success-surface: #DCFCE7;

  --warning: #EAB308;
  --on-warning: #1C1917;
  --warning-surface: #FEF9C3;

  --error: #EF4444;
  --on-error: #450A0A;
  --error-surface: #FEE2E2;

  --info: #06B6D4;
  --on-info: #083344;
  --info-surface: #CFFAFE;

  /* Interactive Elements (Light Mode) */
  --link: #2563EB;
  --link-hover: #1D4ED8;

  /* Effects (Light Mode) */
  --ring: rgba(59, 130, 246, 0.5);  /* Focus ring */
  --shadow-1: 0 1px 2px rgba(0, 0, 0, 0.06);
  --shadow-2: 0 4px 12px rgba(0, 0, 0, 0.08);
  --shadow-3: 0 8px 24px rgba(0, 0, 0, 0.12);
  
  /* Layout */
  --radius: 14px;
  --radius-sm: 8px;
  --radius-lg: 20px;
  
  /* Spacing */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;
  --space-2xl: 48px;

  /* Gradients (Light Mode) */
  --grad-primary: linear-gradient(90deg, #2563EB 0%, #1D4ED8 100%);
  --grad-warn: linear-gradient(90deg, #EAB308 0%, #F59E0B 100%);
  --grad-success: linear-gradient(90deg, #16A34A 0%, #15803D 100%);
  --grad-error: linear-gradient(90deg, #EF4444 0%, #DC2626 100%);
  
  /* Brand Colors (Preserved) */
  --editaliza-blue: #0528f2;
  --editaliza-green: #1ad937;
  
  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-base: 250ms ease;
  --transition-slow: 350ms ease;
}

/* Dark Mode Tokens */
html[data-theme="dark"] {
  /* Base Colors (Dark Mode) */
  --bg: #121212;               /* Main background */
  --surface-1: #1E1E1E;        /* Cards/blocks */
  --surface-2: #181818;        /* Appbar/sections */
  --surface-3: #2A2A2A;        /* Dividers/inputs */
  --border: #2A2A2A;

  /* Text Colors (Dark Mode) */
  --text: #E4E4E7;             /* Off-white primary */
  --text-muted: #A1A1AA;       /* Secondary text */
  --text-disabled: #6B7280;    /* Disabled text */

  /* Primary Colors (Dark Mode - Desaturated) */
  --primary: #3B82F6;          /* Main blue */
  --primary-600: #2563EB;      /* Active/pressed */
  --primary-400: #60A5FA;      /* Hover */
  --on-primary: #0B1220;       /* Text on blue in dark */

  /* Secondary Colors (Dark Mode) */
  --secondary: #30343A;        /* Neutral button/control */
  --secondary-hover: #3B4149;
  --on-secondary: #E5E7EB;

  /* Status Colors (Dark Mode) */
  --success: #22C55E;
  --on-success: #052E16;
  --success-surface: #0F2B1B;

  --warning: #EAB308;
  --on-warning: #1C1917;
  --warning-surface: #2A2105;

  --error: #EF4444;
  --on-error: #450A0A;
  --error-surface: #301014;

  --info: #06B6D4;
  --on-info: #083344;
  --info-surface: #0A1F24;

  /* Interactive Elements (Dark Mode) */
  --link: #8AB4FF;             /* Softer link color */
  --link-hover: #A7C4FF;

  /* Effects (Dark Mode) */
  --ring: rgba(138, 180, 255, 0.45);
  --shadow-1: 0 1px 2px rgba(0, 0, 0, 0.35);
  --shadow-2: 0 8px 28px rgba(0, 0, 0, 0.35);
  --shadow-3: 0 16px 48px rgba(0, 0, 0, 0.5);

  /* Gradients (Dark Mode - Adjusted) */
  --grad-primary: linear-gradient(90deg, #3B82F6 0%, #2563EB 100%);
  --grad-warn: linear-gradient(90deg, #EAB308 0%, #F59E0B 100%);
  --grad-success: linear-gradient(90deg, #22C55E 0%, #16A34A 100%);
  --grad-error: linear-gradient(90deg, #EF4444 0%, #DC2626 100%);
}

/* ===============================================
 * SEMANTIC CLASSES
 * =============================================== */

/* Base */
body {
  background: var(--bg);
  color: var(--text);
  transition: background-color var(--transition-base), color var(--transition-base);
}

/* Cards */
.card {
  background: var(--surface-1);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-1);
  transition: all var(--transition-fast);
}

.card--elevated {
  box-shadow: var(--shadow-2);
}

.card--elevated:hover {
  box-shadow: var(--shadow-3);
  transform: translateY(-2px);
}

/* Typography */
.heading {
  color: var(--text);
  font-weight: 600;
}

.subtle {
  color: var(--text-muted);
}

.disabled {
  color: var(--text-disabled);
  cursor: not-allowed;
  opacity: 1; /* Don't use opacity for disabled text */
}

/* Buttons */
.button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  border-radius: 12px;
  padding: 0.7rem 1rem;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: transform 40ms ease, background var(--transition-fast), box-shadow var(--transition-fast);
}

.button--primary {
  background: var(--primary);
  color: var(--on-primary);
}

.button--primary:hover:not(:disabled) {
  background: var(--primary-400);
  transform: translateY(-1px);
  box-shadow: var(--shadow-2);
}

.button--primary:active:not(:disabled) {
  background: var(--primary-600);
  transform: translateY(0);
}

.button--secondary {
  background: var(--secondary);
  color: var(--on-secondary);
}

.button--secondary:hover:not(:disabled) {
  background: var(--secondary-hover);
  transform: translateY(-1px);
}

.button--gradient {
  background: var(--grad-primary);
  color: var(--on-primary);
}

.button:disabled {
  background: var(--surface-3);
  color: var(--text-disabled);
  cursor: not-allowed;
  transform: none;
}

/* Links */
.link {
  color: var(--link);
  text-decoration: none;
  transition: color var(--transition-fast);
}

.link:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

/* Badges */
.badge {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem 0.75rem;
  border-radius: 999px;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all var(--transition-fast);
}

.badge--success {
  background: var(--success-surface);
  color: var(--success);
}

.badge--warning {
  background: var(--warning-surface);
  color: var(--warning);
}

.badge--error {
  background: var(--error-surface);
  color: var(--error);
}

.badge--info {
  background: var(--info-surface);
  color: var(--info);
}

/* Form Controls */
.input,
.select,
.textarea {
  background: var(--surface-1);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 0.75rem 1rem;
  font-size: 1rem;
  transition: all var(--transition-fast);
}

.input:focus,
.select:focus,
.textarea:focus {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
  border-color: var(--primary);
}

.input::placeholder,
.textarea::placeholder {
  color: var(--text-muted);
}

/* Dividers */
hr,
.divider {
  border: none;
  border-top: 1px solid var(--surface-3);
  margin: var(--space-lg) 0;
}

/* Navigation */
.nav {
  background: var(--surface-2);
  border-bottom: 1px solid var(--border);
  box-shadow: var(--shadow-1);
}

.nav-link {
  color: var(--text-muted);
  padding: 0.5rem 1rem;
  border-radius: var(--radius-sm);
  transition: all var(--transition-fast);
}

.nav-link:hover {
  background: var(--surface-3);
  color: var(--text);
}

.nav-link--active {
  background: var(--grad-primary);
  color: var(--on-primary);
  font-weight: 600;
}

/* Sections - More breathing room in dark mode */
.section {
  margin-block: var(--space-lg);
}

html[data-theme="dark"] .section {
  margin-block: var(--space-xl);
}

/* Discipline Cards - Simplified for dark mode */
.card-disciplina {
  background: var(--surface-1);
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
  padding-left: var(--space-md);
}

.card-disciplina::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: 4px;
  background: var(--primary);
  opacity: 0.85;
}

.card-disciplina .status--ok {
  color: var(--success);
}

.card-disciplina .status--warning {
  color: var(--warning);
}

.card-disciplina .status--error {
  color: var(--error);
}

/* Focus Visible - Accessibility */
*:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}

/* Smooth transitions for theme switching */
* {
  transition-property: background-color, border-color, color;
  transition-duration: var(--transition-base);
  transition-timing-function: ease;
}

/* Prevent transition on page load */
.no-transitions * {
  transition: none !important;
}

/* Utility Classes */
.bg-primary { background: var(--primary); }
.bg-surface { background: var(--surface-1); }
.bg-elevated { background: var(--surface-2); }

.text-primary { color: var(--text); }
.text-muted { color: var(--text-muted); }
.text-disabled { color: var(--text-disabled); }

.border { border: 1px solid var(--border); }
.rounded { border-radius: var(--radius); }
.rounded-sm { border-radius: var(--radius-sm); }
.rounded-lg { border-radius: var(--radius-lg); }

.shadow { box-shadow: var(--shadow-1); }
.shadow-md { box-shadow: var(--shadow-2); }
.shadow-lg { box-shadow: var(--shadow-3); }

/* Spacing utilities */
.p-xs { padding: var(--space-xs); }
.p-sm { padding: var(--space-sm); }
.p-md { padding: var(--space-md); }
.p-lg { padding: var(--space-lg); }
.p-xl { padding: var(--space-xl); }

.m-xs { margin: var(--space-xs); }
.m-sm { margin: var(--space-sm); }
.m-md { margin: var(--space-md); }
.m-lg { margin: var(--space-lg); }
.m-xl { margin: var(--space-xl); }

/* ===============================================
 * FORÇA BRUTA - DARK MODE OVERRIDE
 * Garante que tokens vençam hardcodes e Tailwind
 * =============================================== */

/* 1) Garanta data-theme no HTML */
html:not([data-theme]) { color-scheme: light dark; }
@media (prefers-color-scheme: dark) {
  html:not([data-theme]) { 
    --theme-detected: "dark";
  }
}

/* 2) Reset de cores hardcoded mais comuns em dark */
html[data-theme="dark"] body {
  background-color: var(--bg) !important;
  color: var(--text) !important;
}

html[data-theme="dark"] .card,
html[data-theme="dark"] .panel,
html[data-theme="dark"] .box,
html[data-theme="dark"] .modal,
html[data-theme="dark"] .dropdown,
html[data-theme="dark"] .table,
html[data-theme="dark"] .toast,
html[data-theme="dark"] .content-card,
html[data-theme="dark"] .bg-white {
  background-color: var(--surface-1) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

/* 3) Títulos e links: sair do neon */
html[data-theme="dark"] h1, 
html[data-theme="dark"] h2, 
html[data-theme="dark"] h3,
html[data-theme="dark"] h4,
html[data-theme="dark"] h5,
html[data-theme="dark"] h6,
html[data-theme="dark"] .heading,
html[data-theme="dark"] .text-gray-900,
html[data-theme="dark"] .text-gray-800,
html[data-theme="dark"] .text-black { 
  color: var(--text) !important;
}

html[data-theme="dark"] a:not(.button):not(.btn),
html[data-theme="dark"] .link {
  color: var(--link) !important;
}
html[data-theme="dark"] a:not(.button):not(.btn):hover,
html[data-theme="dark"] .link:hover {
  color: var(--link-hover) !important;
  text-decoration: underline;
}

/* 4) Botões primários azuis */
html[data-theme="dark"] .btn-primary,
html[data-theme="dark"] .button--primary,
html[data-theme="dark"] .bg-blue-600,
html[data-theme="dark"] .bg-blue-500 {
  background: var(--primary) !important;
  color: var(--on-primary) !important;
  border-color: transparent !important;
}
html[data-theme="dark"] .btn-primary:hover,
html[data-theme="dark"] .button--primary:hover { 
  background: var(--primary-400) !important; 
}
html[data-theme="dark"] .btn-primary:active,
html[data-theme="dark"] .button--primary:active { 
  background: var(--primary-600) !important; 
}

/* 5) Botões neutros */
html[data-theme="dark"] .btn-secondary,
html[data-theme="dark"] .button--secondary,
html[data-theme="dark"] .bg-gray-100,
html[data-theme="dark"] .bg-gray-200 {
  background: var(--secondary) !important;
  color: var(--on-secondary) !important;
  border-color: var(--border) !important;
}

/* 6) Badges de status (adeus pastel fluorescente) */
html[data-theme="dark"] .badge-success,
html[data-theme="dark"] .bg-green-100 { 
  background: var(--success-surface) !important; 
  color: var(--success) !important; 
}
html[data-theme="dark"] .badge-warning,
html[data-theme="dark"] .bg-yellow-100,
html[data-theme="dark"] .bg-amber-100 { 
  background: var(--warning-surface) !important; 
  color: var(--warning) !important; 
}
html[data-theme="dark"] .badge-error,
html[data-theme="dark"] .bg-red-100 { 
  background: var(--error-surface) !important; 
  color: var(--error) !important; 
}
html[data-theme="dark"] .badge-info,
html[data-theme="dark"] .bg-blue-100 { 
  background: var(--info-surface) !important; 
  color: var(--info) !important; 
}

/* 7) Cards de disciplinas: remover fundo "glow", usar borda esquerda */
html[data-theme="dark"] .card-disciplina {
  background: var(--surface-1) !important;
  position: relative; 
  border: 1px solid var(--border) !important;
}

/* 8) Inputs, selects, textarea */
html[data-theme="dark"] input,
html[data-theme="dark"] select,
html[data-theme="dark"] textarea,
html[data-theme="dark"] .input,
html[data-theme="dark"] .select,
html[data-theme="dark"] .textarea {
  background: var(--surface-1) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
}
html[data-theme="dark"] input:focus,
html[data-theme="dark"] select:focus,
html[data-theme="dark"] textarea:focus { 
  outline: 2px solid var(--ring) !important; 
  outline-offset: 2px; 
  border-color: var(--primary) !important;
}

/* 9) Footer - trocar linha azul gritante */
html[data-theme="dark"] .footer,
html[data-theme="dark"] footer,
html[data-theme="dark"] .editaliza-footer,
html[data-theme="dark"] .editaliza-footer-refatorado {
  background: var(--surface-2) !important;
  border-top: 1px solid var(--surface-3) !important;
  color: var(--text-muted) !important;
}

/* 10) Text colors common overrides */
html[data-theme="dark"] .text-gray-600,
html[data-theme="dark"] .text-gray-700 {
  color: var(--text-muted) !important;
}

html[data-theme="dark"] .text-gray-500,
html[data-theme="dark"] .text-gray-400 {
  color: var(--text-disabled) !important;
}

/* 11) Border colors */
html[data-theme="dark"] .border-gray-200,
html[data-theme="dark"] .border-gray-300,
html[data-theme="dark"] .border-gray-100 {
  border-color: var(--border) !important;
}

/* 12) Espaçamento extra no dark para não virar paredão de caixas */
html[data-theme="dark"] .section,
html[data-theme="dark"] .space-y-4 > *,
html[data-theme="dark"] .space-y-6 > * {
  margin-block: calc(var(--space-lg) + 4px) !important;
}

/* 13) Remove gradientes hardcoded que ficam horríveis no dark */
html[data-theme="dark"] .bg-gradient-to-r,
html[data-theme="dark"] .bg-gradient-to-br,
html[data-theme="dark"] .bg-gradient-to-b {
  background: var(--surface-1) !important;
  border-left: 4px solid var(--primary) !important;
}

/* 14) Tailwind slate overrides */
html[data-theme="dark"] .bg-slate-50,
html[data-theme="dark"] .bg-slate-100 {
  background: var(--bg) !important;
}

/* 15) Force navigation to use tokens */
html[data-theme="dark"] .nav,
html[data-theme="dark"] nav,
html[data-theme="dark"] header {
  background: var(--surface-2) !important;
  border-color: var(--border) !important;
}

/* Accessibility - Contrast Requirements */
@media (prefers-contrast: high) {
  :root {
    --shadow-1: 0 1px 3px rgba(0, 0, 0, 0.12);
    --shadow-2: 0 4px 16px rgba(0, 0, 0, 0.16);
    --border: #374151;
  }
  
  html[data-theme="dark"] {
    --text: #FFFFFF;
    --border: #4B5563;
    --surface-1: #262626;
    --surface-2: #1F1F1F;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
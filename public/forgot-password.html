<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuperar Senha - Editaliza</title>
    <!-- Favicon and Web App Icons - Enhanced for better browser compatibility -->
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png?v=4">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png?v=4">
    <link rel="icon" type="image/png" sizes="48x48" href="favicon-48x48.png?v=4">
    <link rel="shortcut icon" href="favicon.ico?v=4">
    <link rel="icon" type="image/x-icon" href="favicon.ico?v=4">
    <link rel="icon" type="image/svg+xml" href="favicon.svg?v=4">
    <meta name="theme-color" content="#0528f2">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <!-- SCRIPT CENTRALIZADO -->
    <script src="js/app.js"></script>
    <!-- Config do Tailwind para reconhecer as cores customizadas -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'editaliza-blue': '#0528f2',
                        'editaliza-green': '#1ad937',
                        'editaliza-black': '#0d0d0d',
                        'editaliza-gray': '#969696',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-50 flex items-center justify-center min-h-screen p-4">
    <!-- Container de Toast para Notificações -->
    <div id="toast-container" class="fixed top-5 right-5 z-50 space-y-3"></div>

    <div class="w-full max-w-md">
        <div class="text-center mb-8">
            <!-- LOGOTIPO SVG ATUALIZADO E CORRIGIDO -->
            <div class="flex justify-center">
                <svg id="Camada_2" data-name="Camada 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 510.24 101.5" class="h-16 w-auto">
                  <defs>
                    <style>
                      .cls-1-logotipo-auth { fill: #0528f2; }
                      .cls-2-logotipo-auth { fill: #0d0d0d; }
                      .cls-3-logotipo-auth { fill: #1ad937; }
                    </style>
                  </defs>
                  <g id="Camada_1-2" data-name="Camada 1">
                    <g>
                      <g>
                        <path class="cls-2-logotipo-auth" d="M148.68,17.22l49.51-.04v9.32l-39.51.03v17.97l37.97-.03v9.22l-37.97.03v20.83l39.51-.03v9.22l-49.51.04V17.22Z"/>
                        <path class="cls-2-logotipo-auth" d="M210.98,77.75c-4.49-4.5-6.73-10.65-6.73-18.44s2.13-13.7,6.39-18.26c4.26-4.57,10.17-6.85,17.74-6.86,7.5,0,13.55,2.59,18.17,7.78v-24.82h9.23s0,66.56,0,66.56h-9.23s0-5.79,0-5.79c-2.24,2.22-4.82,3.87-7.74,4.95-2.92,1.08-6.04,1.62-9.37,1.62-7.82,0-13.97-2.24-18.46-6.74ZM242.51,72.54c2.76-2.57,4.13-6.39,4.13-11.46v-3.61c0-4.56-1.52-8.19-4.57-10.89-3.04-2.69-7.16-4.04-12.35-4.03-4.74,0-8.57,1.4-11.49,4.19-2.92,2.79-4.37,7.01-4.37,12.65s1.44,9.89,4.33,12.74c2.88,2.85,6.95,4.27,12.21,4.27,5.32,0,9.36-1.29,12.11-3.86Z"/>
                        <path class="cls-2-logotipo-auth" d="M264.04,17.13h9.42s0,11.21,0,11.21h-9.42s0-11.21,0-11.21ZM264.14,35.96h9.23s0,47.73,0,47.73h-9.23s0-47.73,0-47.73Z"/>
                        <path class="cls-2-logotipo-auth" d="M293.7,80.3c-2.34-2.76-3.61-6.8-3.8-12.12v-23.77h-8.27s0-8.27,0-8.27h8.27v-17.69h9.32s0,17.68,0,17.68h15.86s0,8.26,0,8.26h-15.86v24.55c0,4.69,2.66,7.03,7.98,7.03,2.18,0,4.65-.32,7.4-.96l2.21,7.32c-2.31.76-4.31,1.3-6.01,1.62-1.7.32-3.48.48-5.34.48-5.51,0-9.44-1.37-11.78-4.13Z"/>
                        <path class="cls-2-logotipo-auth" d="M326.96,80.36c-3.43-2.57-5.14-6.32-5.14-11.26,0-6.09,2.55-10.19,7.64-12.32,5.1-2.13,12.03-3.26,20.81-3.39l9.04-.2v-1.24c0-3.55-.95-6.05-2.84-7.51-1.89-1.46-5.14-2.18-9.76-2.18-4.1,0-7.21.67-9.32,2-2.12,1.33-3.24,3.58-3.36,6.75h-9.42c.13-5.89,2.05-10.17,5.77-12.84,3.72-2.67,9.16-4.03,16.34-4.1,7.69.06,13.25,1.57,16.68,4.55,3.43,2.98,5.14,7.51,5.14,13.6v31.38h-9.13s0-7.03,0-7.03c-4.55,5.08-10.64,7.62-18.27,7.62-6.02,0-10.75-1.28-14.18-3.84ZM354.7,73.64c3.08-1.97,4.61-4.6,4.61-7.9v-5.8l-8.84.29c-7.05.26-12.03,1.07-14.95,2.44-2.92,1.37-4.37,3.51-4.37,6.42,0,2.41.96,4.26,2.88,5.56,1.92,1.3,4.84,1.95,8.75,1.94,4.87,0,8.84-.99,11.92-2.96Z"/>
                        <path class="cls-2-logotipo-auth" d="M377.19,17.04h9.23s0,66.56,0,66.56h-9.23s0-66.56,0-66.56Z"/>
                        <path class="cls-2-logotipo-auth" d="M394.68,17.02h9.42s0,11.21,0,11.21h-9.42s0-11.21,0-11.21ZM394.78,35.85h9.23s0,47.73,0,47.73h-9.23s0-47.73,0-47.73Z"/>
                        <path class="cls-2-logotipo-auth" d="M412.28,76.83l30.57-33.12-29.9.02v-7.7l42.4-.03v6.56l-30.38,32.93,30.09-.02v8.08l-42.78.03v-6.75Z"/>
                        <path class="cls-2-logotipo-auth" d="M468.66,80.25c-3.43-2.57-5.14-6.32-5.14-11.26,0-6.09,2.55-10.19,7.64-12.32,5.1-2.13,12.03-3.26,20.81-3.39l9.04-.2v-1.24c0-3.55-.95-6.05-2.84-7.51-1.89-1.46-5.14-2.18-9.76-2.18-4.1,0-7.21.67-9.32,2-2.12,1.33-3.24,3.58-3.36,6.75h-9.42c.13-5.89,2.05-10.17,5.77-12.84,3.72-2.67,9.16-4.03,16.34-4.1,7.69.06,13.25,1.57,16.68,4.55,3.43,2.98,5.14,7.51,5.14,13.6v31.38h-9.13s0-7.03,0-7.03c-4.55,5.08-10.64,7.62-18.27,7.62-6.02,0-10.75-1.28-14.18-3.84ZM496.39,73.53c3.08-1.97,4.61-4.6,4.61-7.9v-5.8l-8.84.29c-7.05.26-12.03,1.07-14.95,2.44-2.92,1.37-4.37,3.51-4.37,6.42,0,2.41.96,4.26,2.88,5.56,1.92,1.3,4.84,1.95,8.75,1.94,4.87,0,8.84-.99,11.92-2.96Z"/>
                      </g>
                      <g>
                        <path class="cls-1-logotipo-auth" d="M58.62,101.5s-12.21-26.73-43.18-21.61v-24.04s29.74,1.62,40.51,31.49c1.21,4.27,2.12,8.98,2.67,14.17Z"/>
                        <path class="cls-3-logotipo-auth" d="M58.62,101.5c-6.75-32.15-28.77-42.36-43.18-45.57-3.53-.79-6.61-1.16-8.89-1.33-2.37-.18-4.2-2.14-4.2-4.52,0-2.73,2.38-4.84,5.09-4.5,11.47,1.44,39.07,8.39,48.52,41.75,1.21,4.27,2.12,8.98,2.67,14.17Z"/>
                        <path class="cls-1-logotipo-auth" d="M69.48,101.5s12.21-27.94,43.18-22.83v-22.83s-29.74,1.62-40.51,31.49c-1.21,4.27-2.12,8.98-2.67,14.17Z"/>
                        <path class="cls-3-logotipo-auth" d="M69.48,101.5c6.75-32.15,28.77-42.36,43.18-45.57,3.53-.79,6.61-1.16,8.89-1.33,2.37-.18,4.2-2.14,4.2-4.52,0-2.73-2.38-4.84-5.09-4.5-11.47,1.44-39.07,8.39-48.52,41.75-1.21,4.27-2.12,8.98-2.67,14.17Z"/>
                        <path class="cls-1-logotipo-auth" d="M92.24,7.72C83.54,2.57,73.8,0,64.05,0c-9.75,0-19.49,2.57-28.19,7.72L1.79,27.87c-2.97,1.76-2.07,6.28,1.35,6.75,12,1.65,31.51,6.67,49.09,21.75,1.7,1.46,3.6,2.57,5.6,3.33,3.99,1.52,8.42,1.52,12.41,0,2-.76,3.9-1.87,5.6-3.33,17.59-15.08,37.1-20.1,49.09-21.75,3.42-.47,4.33-4.99,1.35-6.75L92.24,7.72ZM64.05,48.49c-6.16,0-11.16-5-11.16-11.16s5-11.16,11.16-11.16,11.16,5,11.16,11.16-5,11.16-11.16,11.16Z"/>
                      </g>
                    </g>
                  </g>
                </svg>
            </div>
            <h1 class="mt-4 text-3xl font-bold text-editaliza-black">Recuperar sua senha</h1>
            <p class="mt-2 text-md text-editaliza-gray">
                Sem problemas! Digite seu e-mail e enviaremos um link de recuperação.
            </p>
        </div>

        <div class="bg-white p-8 space-y-6 rounded-2xl shadow-lg">
            <form id="forgotPasswordForm" class="space-y-6">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">E-mail</label>
                    <input id="email" name="email" type="email" autocomplete="email" required class="form-input" placeholder="seu@email.com">
                </div>

                <div id="messageContainer" class="text-sm text-center font-medium"></div>

                <div>
                    <button type="submit" id="submitButton" class="btn-primary">
                        Enviar link de recuperação
                    </button>
                </div>
            </form>
            <div class="text-sm text-center">
                <a href="login.html" class="font-medium text-editaliza-blue hover:text-blue-700">
                    Lembrou a senha? Voltar para o login
                </a>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('forgotPasswordForm');
            const messageContainer = document.getElementById('messageContainer');
            const submitButton = document.getElementById('submitButton');

            form.addEventListener('submit', async (event) => {
                event.preventDefault();

                messageContainer.textContent = '';
                messageContainer.className = 'text-sm text-center font-medium';
                submitButton.disabled = true;
                submitButton.textContent = 'Enviando...';

                const email = document.getElementById('email').value;

                try {
                    // CORRIGIDO: Usa a função centralizada app.apiFetch
                    const data = await app.apiFetch('/request-password-reset', {
                        method: 'POST',
                        body: JSON.stringify({ email })
                    });

                    messageContainer.textContent = data.message;
                    messageContainer.classList.add('text-green-600');
                    form.reset();

                } catch (error) {
                    messageContainer.textContent = `Erro: ${error.message}`;
                    messageContainer.classList.add('text-red-600');
                } finally {
                    submitButton.disabled = false;
                    submitButton.textContent = 'Enviar link de recuperação';
                }
            });
        });
    </script>
</body>
</html>

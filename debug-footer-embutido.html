<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç DEBUG FOOTER EMBUTIDO - Editaliza</title>
    
    <style>
        body { 
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
            overflow-x: hidden;
        }
        
        .debug-panel {
            background: #1a1a1a;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .status {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
            margin: 5px;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.warning { background: #fff3cd; color: #856404; }
        
        .footer-test-area {
            border: 3px dashed #ff0000;
            background: #fff5f5;
            padding: 20px;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .footer-test-area::before {
            content: "üîç √ÅREA DE TESTE DO FOOTER - VERMELHA";
            font-size: 18px;
            font-weight: bold;
            color: #ff0000;
            display: block;
            margin-bottom: 10px;
        }
        
        .controls {
            background: #e9ecef;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-bottom: 1px solid #333;
        }
        
        .log-entry.info { color: #00ff00; }
        .log-entry.warning { color: #ffff00; }
        .log-entry.error { color: #ff0000; }
        .log-entry.success { color: #00ffff; }
        
        .anti-redirect {
            background: #ff6b6b;
            color: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Anti-Redirect -->
    <div class="anti-redirect">
        <h2>üö´ ANTI-REDIRECT ULTRA-ATIVO</h2>
        <p>Esta p√°gina usa APENAS JavaScript puro - SEM scripts externos</p>
        <p>HTML do footer EMBUTIDO para evitar problemas de rede</p>
    </div>
    
    <h1>üîç DEBUG FOOTER EMBUTIDO</h1>
    <p>Esta p√°gina testa o footer com HTML EMBUTIDO (sem requisi√ß√µes de rede)</p>
    
    <div class="controls">
        <h3>üéÆ Controles de Teste:</h3>
        <button onclick="testFooterCSS()">üß™ Testar CSS do Footer</button>
        <button onclick="testFooterHTML()">üß™ Testar HTML do Footer (EMBUTIDO)</button>
        <button onclick="testFooterJS()">üß™ Testar JavaScript do Footer</button>
        <button onclick="clearLogs()">üóëÔ∏è Limpar Logs</button>
        <button onclick="checkAll()">üîç Verificar Tudo</button>
        <button onclick="forceFooter()">üöÄ For√ßar Footer Manual</button>
        <button onclick="injectEmbeddedFooter()">üéØ Injetar Footer Embutido</button>
    </div>
    
    <div class="status">
        <p>CSS carregado: <span id="css-status" class="status">Verificando...</span></p>
        <p>Footer no DOM: <span id="footer-status" class="status">Verificando...</span></p>
        <p>Footer vis√≠vel: <span id="footer-visible" class="status">Verificando...</span></p>
    </div>
    
    <!-- √Årea de Teste do Footer -->
    <div class="footer-test-area" id="footer-test-area">
        <p>Esta √°rea deve mostrar o footer quando ele for renderizado</p>
        <p><strong>Se voc√™ vir o footer aqui, ele est√° funcionando!</strong></p>
    </div>
    
    <!-- Painel de Debug -->
    <div class="debug-panel" id="debug-panel">
        <h3>üìù Logs de Debug:</h3>
        <div id="debug-content">
            <div class="log-entry info">üöÄ Debug embutido iniciado - p√°gina carregada</div>
        </div>
    </div>
    
    <!-- Footer Manual para Teste -->
    <div class="footer-manual" style="background: #333; color: white; padding: 20px; margin: 20px 0; text-align: center;">
        <h3>üß™ Footer Manual para Compara√ß√£o</h3>
        <p>Este √© um footer manual para voc√™ ver se o problema √© de CSS ou de renderiza√ß√£o</p>
        <p>Se este footer aparecer mas o modular n√£o, o problema √© no JavaScript</p>
    </div>
    
    <script>
        // ========================================
        // ANTI-REDIRECT ULTRA-ATIVO
        // ========================================
        
        // Desabilitar TODOS os redirecionamentos poss√≠veis
        window.addEventListener('beforeunload', function(e) {
            e.preventDefault();
            e.returnValue = '';
            return '';
        });
        
        // Interceptar mudan√ßas de URL
        let currentUrl = window.location.href;
        setInterval(() => {
            if (window.location.href !== currentUrl) {
                console.log('üö´ Redirecionamento detectado!', {
                    from: currentUrl,
                    to: window.location.href
                });
                // Tentar voltar
                window.history.back();
                // For√ßar URL atual
                window.history.pushState(null, '', currentUrl);
            }
        }, 50);
        
        // Interceptar pushState e replaceState
        const originalPushState = history.pushState;
        const originalReplaceState = history.replaceState;
        
        history.pushState = function(...args) {
            console.log('üö´ pushState interceptado:', args);
            return originalPushState.apply(history, args);
        };
        
        history.replaceState = function(...args) {
            console.log('üö´ replaceState interceptado:', args);
            return originalReplaceState.apply(history, args);
        };
        
        // ========================================
        // FOOTER HTML EMBUTIDO
        // ========================================
        
        const FOOTER_HTML_EMBEDDED = `
        <footer class="editaliza-footer">
            <div class="footer-container">
                <!-- Grid principal -->
                <div class="footer-grid">
                    <!-- Se√ß√£o da marca -->
                    <div class="footer-brand">
                        <div class="footer-logo">
                            <h3 style="color: #0528f2; margin: 0;">EDITALIZA</h3>
                        </div>
                        <p class="footer-description">
                            Plataforma inteligente de estudos para concursos p√∫blicos com metodologia personalizada.
                        </p>
                        
                        <!-- Redes sociais -->
                        <div class="footer-social">
                            <div class="social-links">
                                <a href="#" class="social-link" title="Instagram">üì∑ Instagram</a>
                                <a href="#" class="social-link" title="LinkedIn">üíº LinkedIn</a>
                                <a href="#" class="social-link" title="WhatsApp">üì± WhatsApp</a>
                            </div>
                        </div>
                    </div>

                    <!-- Links da plataforma -->
                    <div class="footer-section">
                        <h3>Plataforma</h3>
                        <ul class="footer-links">
                            <li><a href="dashboard.html">Dashboard</a></li>
                            <li><a href="home.html">Meus Estudos</a></li>
                            <li><a href="cronograma.html">Cronograma</a></li>
                            <li><a href="plan_settings.html">Configura√ß√µes do Plano</a></li>
                            <li><a href="profile.html">Meu Perfil</a></li>
                        </ul>
                    </div>

                    <!-- Recursos -->
                    <div class="footer-section">
                        <h3>Recursos</h3>
                        <ul class="footer-links">
                            <li><a href="#simulados">Simulados</a></li>
                            <li><a href="#revisoes">Revis√µes</a></li>
                            <li><a href="#redacoes">Reda√ß√µes</a></li>
                            <li><a href="#cronograma-inteligente">Cronograma Inteligente</a></li>
                            <li><a href="#gamificacao">Gamifica√ß√£o</a></li>
                        </ul>
                    </div>

                    <!-- Suporte e contato -->
                    <div class="footer-section">
                        <h3>Suporte</h3>
                        <ul class="footer-links">
                            <li><a href="mailto:suporte@editaliza.com">Contato</a></li>
                            <li><a href="#central-ajuda">Central de Ajuda</a></li>
                            <li><a href="#status">Status</a></li>
                        </ul>
                    </div>
                </div>

                <!-- Linha divis√≥ria -->
                <div class="footer-divider"></div>

                <!-- Copyright -->
                <div class="footer-bottom">
                    <p>&copy; 2024 Editaliza. Todos os direitos reservados.</p>
                </div>
            </div>
        </footer>
        `;
        
        // ========================================
        // DEBUG EMBUTIDO DO FOOTER
        // ========================================
        
        let debugLog = [];
        
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}`;
            
            debugLog.push(logEntry);
            
            // Adicionar ao painel
            const debugContent = document.getElementById('debug-content');
            const logDiv = document.createElement('div');
            logDiv.className = `log-entry ${type}`;
            logDiv.textContent = logEntry;
            
            debugContent.appendChild(logDiv);
            debugContent.scrollTop = debugContent.scrollHeight;
            
            // Log no console tamb√©m
            console.log(`[DEBUG ${type.toUpperCase()}] ${message}`);
        }
        
        // ========================================
        // FUN√á√ïES DE TESTE
        // ========================================
        
        function testFooterCSS() {
            addLog('üß™ Testando CSS do footer...', 'info');
            
            // Tentar carregar o CSS dinamicamente
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = 'css/footer.css';
            
            link.onload = function() {
                addLog('‚úÖ CSS do footer carregado dinamicamente', 'success');
                
                // Verificar se os estilos est√£o sendo aplicados
                const testDiv = document.createElement('div');
                testDiv.className = 'editaliza-footer';
                testDiv.style.cssText = 'padding: 20px; margin: 10px; border: 2px solid red;';
                testDiv.innerHTML = '<h4>üß™ Teste CSS Footer</h4><p>Se voc√™ vir este elemento estilizado, o CSS est√° funcionando</p>';
                
                document.body.appendChild(testDiv);
                
                // Verificar estilos computados
                const computedStyle = getComputedStyle(testDiv);
                addLog('üìä Estilos computados do teste', 'info');
                addLog(`Background: ${computedStyle.backgroundColor}`, 'info');
                addLog(`Color: ${computedStyle.color}`, 'info');
                addLog(`FontSize: ${computedStyle.fontSize}`, 'info');
                
            };
            
            link.onerror = function() {
                addLog('‚ùå Erro ao carregar CSS do footer', 'error');
            };
            
            document.head.appendChild(link);
        }
        
        function testFooterHTML() {
            addLog('üß™ Testando HTML do footer EMBUTIDO...', 'info');
            
            // Usar o HTML embutido em vez de fazer requisi√ß√£o de rede
            addLog('‚úÖ HTML do footer embutido dispon√≠vel', 'success');
            
            // Inserir o HTML na √°rea de teste
            const testArea = document.getElementById('footer-test-area');
            testArea.innerHTML = FOOTER_HTML_EMBEDDED;
            testArea.style.border = '3px solid #00ff00';
            
            addLog('üéâ Footer HTML EMBUTIDO inserido na √°rea de teste', 'success');
            addLog('üìù HTML inserido sem requisi√ß√µes de rede', 'info');
        }
        
        function injectEmbeddedFooter() {
            addLog('üéØ Injetando footer embutido no body...', 'info');
            
            // Injetar o footer embutido diretamente no body
            document.body.insertAdjacentHTML('beforeend', FOOTER_HTML_EMBEDDED);
            
            addLog('‚úÖ Footer embutido injetado no body', 'success');
            addLog('üîç Footer deve aparecer no final da p√°gina', 'info');
        }
        
        function testFooterJS() {
            addLog('üß™ Testando JavaScript do footer...', 'info');
            
            // Verificar se o arquivo footer.js existe
            const xhr = new XMLHttpRequest();
            xhr.open('HEAD', 'js/footer.js', true);
            
            xhr.onload = function() {
                if (xhr.status === 200) {
                    addLog('‚úÖ Arquivo footer.js encontrado', 'success');
                    
                    // Tentar carregar o script
                    const script = document.createElement('script');
                    script.src = 'js/footer.js';
                    
                    script.onload = function() {
                        addLog('‚úÖ Script footer.js carregado com sucesso', 'success');
                        
                        // Verificar se a classe est√° dispon√≠vel
                        if (typeof EditalizaFooterRefatorado !== 'undefined') {
                            addLog('‚úÖ Classe EditalizaFooterRefatorado dispon√≠vel', 'success');
                            
                            // Tentar criar uma inst√¢ncia
                            try {
                                const footer = new EditalizaFooterRefatorado();
                                addLog('‚úÖ Inst√¢ncia do footer criada com sucesso', 'success');
                                
                                // Tentar inicializar
                                if (footer.init) {
                                    footer.init();
                                    addLog('‚úÖ Footer inicializado', 'success');
                                }
                                
                            } catch (error) {
                                addLog(`‚ùå Erro ao criar inst√¢ncia: ${error.message}`, 'error');
                            }
                            
                        } else {
                            addLog('‚ùå Classe EditalizaFooterRefatorado n√£o dispon√≠vel', 'error');
                        }
                    };
                    
                    script.onerror = function() {
                        addLog('‚ùå Erro ao carregar script footer.js', 'error');
                    };
                    
                    document.head.appendChild(script);
                    
                } else {
                    addLog(`‚ùå Arquivo footer.js n√£o encontrado: HTTP ${xhr.status}`, 'error');
                }
            };
            
            xhr.onerror = function() {
                addLog('‚ùå Erro de rede ao verificar footer.js', 'error');
            };
            
            xhr.send();
        }
        
        function forceFooter() {
            addLog('üöÄ For√ßando footer manual...', 'info');
            
            // Criar um footer manual b√°sico
            const footer = document.createElement('footer');
            footer.className = 'editaliza-footer-forcado';
            footer.style.cssText = `
                background: #2c3e50;
                color: white;
                padding: 20px;
                text-align: center;
                border-top: 3px solid #e74c3c;
                margin-top: 20px;
            `;
            
            footer.innerHTML = `
                <h3>üöÄ Footer For√ßado Manualmente</h3>
                <p>Este footer foi criado manualmente para testar se o problema √© de renderiza√ß√£o</p>
                <p>Se voc√™ vir este footer, o problema √© no sistema modular</p>
                <div style="margin-top: 15px;">
                    <a href="#" style="color: #3498db; margin: 0 10px;">In√≠cio</a>
                    <a href="#" style="color: #3498db; margin: 0 10px;">Sobre</a>
                    <a href="#" style="color: #3498db; margin: 0 10px;">Contato</a>
                </div>
            `;
            
            document.body.appendChild(footer);
            addLog('‚úÖ Footer manual criado e inserido', 'success');
        }
        
        function checkAll() {
            addLog('üîç Verifica√ß√£o completa iniciada...', 'info');
            
            // Verificar CSS
            const cssStatus = document.getElementById('css-status');
            const footerCSS = document.querySelector('link[href="css/footer.css"]');
            if (footerCSS) {
                cssStatus.textContent = '‚úÖ CSS carregado';
                cssStatus.className = 'status success';
                addLog('‚úÖ CSS do footer carregado', 'success');
            } else {
                cssStatus.textContent = '‚ùå CSS n√£o encontrado';
                cssStatus.className = 'status error';
                addLog('‚ùå CSS do footer n√£o encontrado', 'error');
            }
            
            // Verificar footer no DOM
            const footerStatus = document.getElementById('footer-status');
            const footer = document.querySelector('.editaliza-footer, .editaliza-footer-refatorado, .editaliza-footer-forcado');
            if (footer) {
                footerStatus.textContent = '‚úÖ Footer no DOM';
                footerStatus.className = 'status success';
                addLog('‚úÖ Footer encontrado no DOM', 'success');
                
                // Verificar se est√° vis√≠vel
                const footerVisible = document.getElementById('footer-visible');
                const isVisible = footer.offsetHeight > 0 && footer.offsetWidth > 0;
                if (isVisible) {
                    footerVisible.textContent = '‚úÖ Footer vis√≠vel';
                    footerVisible.className = 'status success';
                    addLog('‚úÖ Footer est√° vis√≠vel', 'success');
                } else {
                    footerVisible.textContent = '‚ùå Footer n√£o vis√≠vel';
                    footerVisible.className = 'status error';
                    addLog('‚ùå Footer n√£o est√° vis√≠vel', 'error');
                }
                
            } else {
                footerStatus.textContent = '‚ùå Footer n√£o no DOM';
                footerStatus.className = 'status error';
                addLog('‚ùå Footer n√£o encontrado no DOM', 'error');
            }
            
            addLog('üîç Verifica√ß√£o completa finalizada', 'info');
        }
        
        function clearLogs() {
            debugLog = [];
            const debugContent = document.getElementById('debug-content');
            debugContent.innerHTML = '<div class="log-entry info">üóëÔ∏è Logs limpos</div>';
            addLog('üóëÔ∏è Logs limpos com sucesso', 'info');
        }
        
        // ========================================
        // INICIALIZA√á√ÉO
        // ========================================
        
        document.addEventListener('DOMContentLoaded', function() {
            addLog('üöÄ DOM carregado - debug embutido iniciado', 'success');
            
            // Verifica√ß√£o autom√°tica inicial
            setTimeout(() => {
                addLog('‚è∞ Verifica√ß√£o autom√°tica inicial (1s delay)', 'info');
                checkAll();
            }, 1000);
        });
        
        // Log inicial
        addLog('üîç Debug embutido do footer iniciado', 'info');
        addLog(`üìÅ Arquivo atual: ${window.location.pathname}`, 'info');
        addLog(`üåê Protocolo: ${window.location.protocol}`, 'info');
        addLog(`üìç URL completa: ${window.location.href}`, 'info');
        addLog('üö´ Sistema anti-redirect ultra-ativo', 'warning');
        addLog('üìù HTML do footer EMBUTIDO dispon√≠vel', 'success');
        
        // Verifica√ß√£o cont√≠nua de redirecionamento
        setInterval(() => {
            if (window.location.href !== currentUrl) {
                addLog('üö´ REDIRECIONAMENTO DETECTADO!', 'error');
                addLog(`De: ${currentUrl}`, 'error');
                addLog(`Para: ${window.location.href}`, 'error');
                
                // Tentar voltar
                window.history.back();
                window.history.pushState(null, '', currentUrl);
                
                addLog('üîÑ Tentando reverter redirecionamento...', 'warning');
            }
        }, 100);
    </script>
</body>
</html>

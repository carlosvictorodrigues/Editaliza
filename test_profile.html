<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Avatares - Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background-color: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .avatar-test { width: 64px; height: 64px; margin: 5px; border: 2px solid #ccc; }
        .avatar-test.loaded { border-color: #28a745; }
        .avatar-test.error { border-color: #dc3545; }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-6">ðŸ§ª Teste de Funcionalidades - Profile.html</h1>
        
        <div id="test-results"></div>
        
        <div class="mt-8">
            <h2 class="text-2xl font-bold mb-4">ðŸ“‹ Testes de Avatares</h2>
            <div id="avatar-tests" class="flex flex-wrap"></div>
        </div>
        
        <div class="mt-8">
            <h2 class="text-2xl font-bold mb-4">ðŸ”§ SimulaÃ§Ã£o de Funcionalidades</h2>
            <div id="function-tests"></div>
        </div>
    </div>

    <script>
        const testResults = document.getElementById('test-results');
        const avatarTests = document.getElementById('avatar-tests');
        const functionTests = document.getElementById('function-tests');
        
        let testCount = 0;
        let passedTests = 0;

        function addTestResult(name, status, message) {
            testCount++;
            const div = document.createElement('div');
            div.className = `test-result ${status}`;
            div.innerHTML = `<strong>${name}:</strong> ${message}`;
            testResults.appendChild(div);
            
            if (status === 'success') passedTests++;
        }

        function testAvatarLoad(category, fileName) {
            return new Promise((resolve) => {
                const img = document.createElement('img');
                img.className = 'avatar-test';
                img.src = `images/avatars/${category}/${fileName}`;
                img.title = `${category}/${fileName}`;
                
                img.onload = () => {
                    img.classList.add('loaded');
                    resolve(true);
                };
                
                img.onerror = () => {
                    img.classList.add('error');
                    resolve(false);
                };
                
                avatarTests.appendChild(img);
            });
        }

        async function runTests() {
            addTestResult('InicializaÃ§Ã£o', 'success', 'PÃ¡gina de teste carregada com sucesso');

            // Teste 1: Verificar se as categorias existem
            const avatarCategories = {
                "Aventureiros": "adventurer",
                "Pixel Art": "pixel-art", 
                "Bots": "bots",
                "Minimalista": "miniavs"
            };

            addTestResult('ConfiguraÃ§Ã£o', 'success', `${Object.keys(avatarCategories).length} categorias de avatar definidas`);

            // Teste 2: Carregar todos os avatares
            let totalAvatars = 0;
            let loadedAvatars = 0;

            for (const [categoryName, categoryKey] of Object.entries(avatarCategories)) {
                for (let i = 1; i <= 6; i++) {
                    totalAvatars++;
                    const fileName = `${categoryKey === 'adventurer' ? 'avatar' : (categoryKey === 'pixel-art' ? 'pixel' : (categoryKey === 'bots' ? 'bot' : 'miniav'))}${i}.svg`;
                    const loaded = await testAvatarLoad(categoryKey, fileName);
                    if (loaded) loadedAvatars++;
                }
            }

            if (loadedAvatars === totalAvatars) {
                addTestResult('Carregamento de Avatares', 'success', `Todos os ${totalAvatars} avatares carregaram com sucesso`);
            } else {
                addTestResult('Carregamento de Avatares', 'error', `${loadedAvatars}/${totalAvatars} avatares carregaram`);
            }

            // Teste 3: Simular funcionalidades JavaScript
            const functionTests = [
                {
                    name: 'FunÃ§Ã£o updateProfilePhoto',
                    test: () => {
                        // Simular a funÃ§Ã£o
                        const testPath = 'images/avatars/adventurer/avatar1.svg';
                        return testPath && testPath.includes('.svg');
                    }
                },
                {
                    name: 'Estrutura de dados avatarCategories',
                    test: () => {
                        return Object.keys(avatarCategories).length === 4;
                    }
                },
                {
                    name: 'Nomenclatura de arquivos',
                    test: () => {
                        const expected = ['avatar1.svg', 'pixel1.svg', 'bot1.svg', 'miniav1.svg'];
                        return expected.length === 4;
                    }
                }
            ];

            functionTests.forEach(test => {
                try {
                    const result = test.test();
                    addTestResult(test.name, result ? 'success' : 'error', result ? 'Passou' : 'Falhou');
                } catch (error) {
                    addTestResult(test.name, 'error', `Erro: ${error.message}`);
                }
            });

            // Teste 4: Verificar CSS e estilos
            const styles = [
                '.avatar-item',
                '.avatar-gallery-tab',
                '.avatar-item.selected',
                '.avatar-item:hover'
            ];

            addTestResult('Estilos CSS', 'success', `${styles.length} classes CSS definidas para avatares`);

            // Resumo final
            setTimeout(() => {
                const summary = document.createElement('div');
                summary.className = 'test-result ' + (passedTests === testCount ? 'success' : 'warning');
                summary.innerHTML = `<strong>ðŸ“Š RESUMO:</strong> ${passedTests}/${testCount} testes passaram (${Math.round(passedTests/testCount*100)}%)`;
                testResults.appendChild(summary);
            }, 1000);
        }

        // Executar testes quando a pÃ¡gina carregar
        window.addEventListener('load', runTests);
    </script>
</body>
</html>
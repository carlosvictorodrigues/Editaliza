# =========================================
# EDITALIZA - CONFIGURAÇÕES DE AMBIENTE
# =========================================

# === CONFIGURAÇÕES BÁSICAS ===
NODE_ENV=development
PORT=3000
HOST=0.0.0.0
BASE_URL=http://localhost:3000
TIMEZONE=America/Sao_Paulo

# === BANCO DE DADOS ===
DATABASE_PATH=./db.sqlite
SQLITE_CACHE_SIZE=-64000
SQLITE_MMAP_SIZE=268435456
SQLITE_BUSY_TIMEOUT=30000

# === CAMINHOS ===
UPLOADS_DIR=./uploads
PUBLIC_DIR=./public
CSS_DIR=./css
JS_DIR=./js
IMAGES_DIR=./images

# === UPLOADS ===
UPLOAD_MAX_FILE_SIZE=5242880
MAX_BODY_SIZE=10mb

# === SESSÃO ===
SESSION_SECRET=change_this_in_production_very_long_secure_string
SESSION_MAX_AGE=86400000
SESSION_STORE_PATH=./sessions.db

# === RATE LIMITING ===
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
LOGIN_RATE_LIMIT_WINDOW_MS=900000
LOGIN_RATE_LIMIT_MAX_ATTEMPTS=5

# === SEGURANÇA ===
JWT_SECRET=change_this_in_production_jwt_secret_very_long_and_secure
JWT_REFRESH_SECRET=change_this_in_production_refresh_secret_very_long_and_secure
HSTS_MAX_AGE=31536000
ALLOWED_ORIGINS=http://localhost:3000

# === OAUTH GOOGLE ===
# Para configurar o Google OAuth:
# 1. Acesse https://console.cloud.google.com/
# 2. Crie um novo projeto ou selecione um existente
# 3. Ative a Google Identity API
# 4. Configure a tela de consentimento OAuth
# 5. Crie credenciais OAuth 2.0 Client ID
# 6. Adicione as URIs de redirecionamento:
#    - http://localhost:3000/auth/google/callback (desenvolvimento)
#    - https://editaliza.com.br/auth/google/callback (produção)
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_CALLBACK_URL=http://localhost:3000/auth/google/callback

# Para produção, use:
# GOOGLE_CALLBACK_URL=https://editaliza.com.br/auth/google/callback

# === EMAIL ===
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_app_password_here
SUPPORT_EMAIL=suporte@editaliza.com.br

# === BUSINESS LOGIC ===
CRONOGRAMA_BATCH_SIZE=100
MAX_NAME_LENGTH=100
MAX_CITY_LENGTH=100
MAX_MOTIVATION_TEXT_LENGTH=1000

# === DEBUG E LOGS ===
DEBUG_MODE=false
LOG_LEVEL=info

# === CORS ===
CORS_ORIGIN=http://localhost:3000

# === CSP CONFIGURAÇÕES ===
CSP_SCRIPT_SRC="'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com https://accounts.google.com https://www.gstatic.com"
CSP_STYLE_SRC="'self' 'unsafe-inline' https://cdn.tailwindcss.com https://fonts.googleapis.com"
CSP_FONT_SRC="'self' https://fonts.gstatic.com"
CSP_IMG_SRC="'self' data: https: blob:"
CSP_CONNECT_SRC="'self' https: wss:"

# =========================================
# SISTEMA DE ASSINATURAS KIWIFY
# =========================================

# === KIWIFY API ===
# Para configurar a integração com Kiwify:
# 1. Acesse https://kiwify.com.br/
# 2. Vá em Configurações > API
# 3. Gere uma chave de API
# 4. Configure os webhooks para: https://seudominio.com/api/webhooks/kiwify
# 5. Anote o secret do webhook para validação de assinatura
KIWIFY_API_KEY=your_kiwify_api_key_here
KIWIFY_API_URL=https://api.kiwify.com.br
KIWIFY_WEBHOOK_SECRET=your_kiwify_webhook_secret_here_minimum_32_chars
KIWIFY_TIMEOUT=30000
KIWIFY_RETRY_ATTEMPTS=3

# === CONFIGURAÇÕES DE WEBHOOK ===
WEBHOOK_MAX_RETRIES=3
WEBHOOK_INITIAL_DELAY=1000
WEBHOOK_MAX_DELAY=30000
WEBHOOK_BACKOFF_FACTOR=2
WEBHOOK_TIMESTAMP_TOLERANCE=300
WEBHOOK_RATE_LIMIT_WINDOW=60000
WEBHOOK_RATE_LIMIT_MAX=100

# === CACHE E REDIS ===
# Redis é opcional mas recomendado para produção
# Se não configurado, usará cache em memória
REDIS_URL=redis://localhost:6379
CACHE_TTL_SECONDS=300
CACHE_MAX_MEMORY_ITEMS=1000

# === ASSINATURAS ===
SUBSCRIPTION_GRACE_PERIOD_DAYS=3
SUBSCRIPTION_CACHE_INVALIDATION=true
SUBSCRIPTION_AUDIT_ENABLED=true
SUBSCRIPTION_ENCRYPT_METADATA=true

# === AUDITORIA E COMPLIANCE ===
AUDIT_ENABLED=true
AUDIT_RETENTION_DAYS=2555
AUDIT_ENABLE_BLOCKCHAIN=true
AUDIT_LOG_LEVEL=INFO

# === SEGURANÇA AVANÇADA ===
SECURITY_ENABLE_RATE_LIMIT=true
SECURITY_ENABLE_IP_WHITELIST=true
SECURITY_MAX_LOGIN_ATTEMPTS=5
SECURITY_LOCKOUT_DURATION=900000

# === MONITORAMENTO ===
MONITORING_ENABLE_HEALTH_CHECKS=true
MONITORING_HEALTH_CHECK_INTERVAL=60000
MONITORING_ENABLE_METRICS=true
MONITORING_METRICS_PORT=9090

# === ALERTAS ===
ALERT_WEBHOOK_FAILURE_THRESHOLD=5
ALERT_RESPONSE_TIME_THRESHOLD=5000
ALERT_ERROR_RATE_THRESHOLD=0.1

# === NOTIFICAÇÕES ===
NOTIFICATIONS_EMAIL_ENABLED=false
NOTIFICATIONS_EMAIL_FROM=noreply@editaliza.com.br
NOTIFICATIONS_SLACK_ENABLED=false
NOTIFICATIONS_SLACK_WEBHOOK_URL=your_slack_webhook_url
NOTIFICATIONS_SLACK_CHANNEL=#alerts

# === BACKUP ===
BACKUP_ENABLED=true
BACKUP_INTERVAL=86400000
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_ENCRYPTION_KEY=your_backup_encryption_key_here
BACKUP_STORAGE_TYPE=local
BACKUP_STORAGE_PATH=./backups

# === BACKUP S3 (OPCIONAL) ===
# BACKUP_S3_BUCKET=your-backup-bucket
# BACKUP_S3_REGION=us-east-1
# BACKUP_S3_ACCESS_KEY_ID=your_access_key
# BACKUP_S3_SECRET_ACCESS_KEY=your_secret_key
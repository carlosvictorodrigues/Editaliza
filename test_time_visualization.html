<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Visualiza√ß√£o de Tempo por Disciplina</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        .progress-bar-container {
            @apply w-full bg-gray-200 rounded-full h-2 overflow-hidden;
        }
        .progress-bar-compact {
            @apply h-full text-xs text-white text-center transition-all duration-500;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .accordion-header.open + .accordion-content {
            max-height: 1000px;
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-7xl mx-auto">
        <h1 class="text-3xl font-bold mb-8 text-center">Teste de Visualiza√ß√£o H√≠brida</h1>
        
        <!-- Container principal -->
        <div id="timeAnalysisContainer" class="bg-white rounded-lg shadow-lg p-6">
            <!-- Ser√° preenchido pelo JavaScript -->
        </div>
        
        <!-- Informa√ß√µes de teste -->
        <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6">
            <h2 class="text-lg font-semibold text-blue-800 mb-4">üìä Compara√ß√£o de Visualiza√ß√µes</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold text-blue-700 mb-2">Gr√°fico de Rosca (Doughnut)</h3>
                    <ul class="text-sm text-blue-600 space-y-1">
                        <li>‚úÖ Vis√£o geral instant√¢nea</li>
                        <li>‚úÖ Compara√ß√£o proporcional clara</li>
                        <li>‚úÖ Visual atrativo e moderno</li>
                        <li>‚úÖ Interativo (clique para detalhes)</li>
                        <li>‚ö†Ô∏è Menos detalhes por t√≥pico</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-blue-700 mb-2">Acorde√£o Detalhado</h3>
                    <ul class="text-sm text-blue-600 space-y-1">
                        <li>‚úÖ Informa√ß√µes completas por t√≥pico</li>
                        <li>‚úÖ Tempo individual de cada item</li>
                        <li>‚úÖ Melhor para an√°lise profunda</li>
                        <li>‚úÖ Responsivo em mobile</li>
                        <li>‚ö†Ô∏è Requer mais intera√ß√£o</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Dados de teste simulados
        const testData = {
            totalProgress: 45.5,
            subjectDetails: [
                {
                    name: 'Direito Constitucional',
                    progress: 60,
                    totalTime: 10800, // 3 horas
                    topics: [
                        { description: 'Princ√≠pios Fundamentais', timeStudied: 3600 },
                        { description: 'Direitos e Garantias', timeStudied: 5400 },
                        { description: 'Organiza√ß√£o do Estado', timeStudied: 1800 },
                        { description: 'Poder Legislativo', timeStudied: 0 }
                    ]
                },
                {
                    name: 'Direito Administrativo',
                    progress: 35,
                    totalTime: 7200, // 2 horas
                    topics: [
                        { description: 'Atos Administrativos', timeStudied: 3600 },
                        { description: 'Licita√ß√µes e Contratos', timeStudied: 2400 },
                        { description: 'Servidores P√∫blicos', timeStudied: 1200 },
                        { description: 'Controle da Administra√ß√£o', timeStudied: 0 }
                    ]
                },
                {
                    name: 'Portugu√™s',
                    progress: 80,
                    totalTime: 14400, // 4 horas
                    topics: [
                        { description: 'Interpreta√ß√£o de Texto', timeStudied: 5400 },
                        { description: 'Gram√°tica', timeStudied: 3600 },
                        { description: 'Reda√ß√£o Oficial', timeStudied: 3600 },
                        { description: 'Ortografia', timeStudied: 1800 }
                    ]
                },
                {
                    name: 'Racioc√≠nio L√≥gico',
                    progress: 25,
                    totalTime: 5400, // 1.5 horas
                    topics: [
                        { description: 'Proposi√ß√µes', timeStudied: 2700 },
                        { description: 'Argumenta√ß√£o', timeStudied: 1800 },
                        { description: 'Diagramas L√≥gicos', timeStudied: 900 },
                        { description: 'Quantificadores', timeStudied: 0 }
                    ]
                },
                {
                    name: 'Inform√°tica',
                    progress: 15,
                    totalTime: 3600, // 1 hora
                    topics: [
                        { description: 'Windows e Linux', timeStudied: 1800 },
                        { description: 'Pacote Office', timeStudied: 1800 },
                        { description: 'Seguran√ßa da Informa√ß√£o', timeStudied: 0 },
                        { description: 'Redes de Computadores', timeStudied: 0 }
                    ]
                }
            ]
        };
        
        // Fun√ß√µes auxiliares
        function formatTime(seconds, placeholder = '00:00:00') {
            if (isNaN(seconds) || seconds <= 0) return placeholder;
            const h = Math.floor(seconds / 3600).toString().padStart(2, '0');
            const m = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
            const s = Math.floor(seconds % 60).toString().padStart(2, '0');
            return `${h}:${m}:${s}`;
        }
        
        function sanitizeHtml(text) {
            return text.replace(/</g, '&lt;').replace(/>/g, '&gt;');
        }
        
        // Carregar m√≥dulo e simular
        const script = document.createElement('script');
        script.src = 'js/modules/time-visualization.js';
        script.onload = function() {
            // Inicializar container
            const container = document.getElementById('timeAnalysisContainer');
            container.innerHTML = TimeVisualization.createVisualizationContainer();
            
            // Atualizar com dados de teste
            TimeVisualization.updateVisualization(testData, formatTime, sanitizeHtml);
            
            // Adicionar bot√µes de teste
            setTimeout(() => {
                const testButtons = document.createElement('div');
                testButtons.className = 'mt-8 flex justify-center space-x-4';
                testButtons.innerHTML = `
                    <button onclick="simulateNoData()" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">
                        Simular Sem Dados
                    </button>
                    <button onclick="simulateFewSubjects()" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                        Simular Poucas Disciplinas
                    </button>
                    <button onclick="simulateManySubjects()" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
                        Simular Muitas Disciplinas
                    </button>
                    <button onclick="toggleMobile()" class="px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600">
                        Toggle Mobile View
                    </button>
                `;
                document.querySelector('.max-w-7xl').appendChild(testButtons);
            }, 100);
        };
        document.head.appendChild(script);
        
        // Fun√ß√µes de simula√ß√£o
        function simulateNoData() {
            const emptyData = {
                totalProgress: 0,
                subjectDetails: []
            };
            TimeVisualization.updateVisualization(emptyData, formatTime, sanitizeHtml);
        }
        
        function simulateFewSubjects() {
            const fewData = {
                totalProgress: 50,
                subjectDetails: testData.subjectDetails.slice(0, 2)
            };
            TimeVisualization.updateVisualization(fewData, formatTime, sanitizeHtml);
        }
        
        function simulateManySubjects() {
            // Adicionar mais disciplinas
            const manyData = {
                totalProgress: 30,
                subjectDetails: [
                    ...testData.subjectDetails,
                    {
                        name: 'Direito Penal',
                        progress: 20,
                        totalTime: 2400,
                        topics: [
                            { description: 'Teoria do Crime', timeStudied: 1200 },
                            { description: 'Crimes em Esp√©cie', timeStudied: 1200 }
                        ]
                    },
                    {
                        name: 'Direito Civil',
                        progress: 15,
                        totalTime: 1800,
                        topics: [
                            { description: 'Parte Geral', timeStudied: 900 },
                            { description: 'Obriga√ß√µes', timeStudied: 900 }
                        ]
                    },
                    {
                        name: 'Legisla√ß√£o Especial',
                        progress: 10,
                        totalTime: 1200,
                        topics: [
                            { description: 'Lei 8.112/90', timeStudied: 600 },
                            { description: 'Lei 8.666/93', timeStudied: 600 }
                        ]
                    }
                ]
            };
            TimeVisualization.updateVisualization(manyData, formatTime, sanitizeHtml);
        }
        
        let isMobile = false;
        function toggleMobile() {
            isMobile = !isMobile;
            const container = document.querySelector('.max-w-7xl');
            if (isMobile) {
                container.style.maxWidth = '375px';
                container.style.padding = '1rem';
            } else {
                container.style.maxWidth = '80rem';
                container.style.padding = '2rem';
            }
        }
    </script>
</body>
</html>